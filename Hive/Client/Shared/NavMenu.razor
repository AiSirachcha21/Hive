@using Hive.Client.Shared.Constants

@inherits Fluxor.Blazor.Web.Components.FluxorComponent


<style>
    .Nav-Menu-Top {
        height: 80%;
    }

    .Nav-Menu-Bottom {
        height: 20%;
        display: flex;
        flex-direction: column;
        justify-content: flex-end;
    }

    .nav-item {
        display: block;
        width: 100%;
        padding: .5rem .75rem;
        transition: all ease-in-out 0.3s;
        text-decoration: none;
        font-size: 1.0125rem;
        color: @HiveColors.Grey;
        text-overflow: ellipsis;
    }

        .nav-item:hover {
            background-color: @Colors.Orange.Lighten5;
        }

        .nav-item.active {
            color: @Colors.Orange.Darken1;
        }
</style>

<AuthorizeView>
    <Authorized>
        <MudDrawer @bind-Open="@(DrawerOpen)"
                   ClipMode="DrawerClipMode.Always"
                   Elevation="2"
                   Variant="DrawerVariant.Mini"
                   Class="d-flex flex-col justify-between">

            @if (!OrganizationState.Value.IsLoading)
            {
                <MudNavMenu>
                    @foreach (var org in OrganizationState.Value.Organizations)
                    {
                        <NavLink href="@Routes.IndexOfOrganization(org.Name)" class="nav-item d-flex align-center">
                            <MudAvatar Size="Size.Small" Rounded="true" Class="mr-2" Color="@Color.Primary">@org.Name.First().ToString().ToUpper()</MudAvatar>
                            @org.Name
                        </NavLink>
                    }
                </MudNavMenu>
            }
            else
            {
                <MudProgressLinear Color="Color.Primary" Indeterminate="true" />
            }
            <MudSpacer />
            <MudNavMenu>
                <MudNavLink Icon="@Icons.Filled.Add"
                            Color="@Color.Primary"
                            IconColor="@Color.Primary">
                    Create an Organization
                </MudNavLink>
                @if (ShouldCollapse())
                {
                    <MudNavLink Icon="@(DrawerOpen ? Icons.Filled.ArrowLeft : Icons.Filled.ArrowRight)"
                            Color="@Color.Primary"
                            IconColor="@Color.Primary"
                            OnClick="OnExpansionToggleClicked"
                            Style="color:#F2994A">
                        Collapse
                    </MudNavLink>
                }

            </MudNavMenu>
        </MudDrawer>
    </Authorized>
</AuthorizeView>
